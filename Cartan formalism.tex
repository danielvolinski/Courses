\documentclass{article}

%% Created with wxMaxima 16.04.2

\setlength{\parskip}{\medskipamount}
\setlength{\parindent}{0pt}
\usepackage[utf8]{inputenc}
\DeclareUnicodeCharacter{00B5}{\ensuremath{\mu}}
\usepackage{graphicx}
\usepackage{color}
\usepackage{amsmath}
\usepackage{ifthen}
\newsavebox{\picturebox}
\newlength{\pictureboxwidth}
\newlength{\pictureboxheight}
\newcommand{\includeimage}[1]{
    \savebox{\picturebox}{\includegraphics{#1}}
    \settoheight{\pictureboxheight}{\usebox{\picturebox}}
    \settowidth{\pictureboxwidth}{\usebox{\picturebox}}
    \ifthenelse{\lengthtest{\pictureboxwidth > .95\linewidth}}
    {
        \includegraphics[width=.95\linewidth,height=.80\textheight,keepaspectratio]{#1}
    }
    {
        \ifthenelse{\lengthtest{\pictureboxheight>.80\textheight}}
        {
            \includegraphics[width=.95\linewidth,height=.80\textheight,keepaspectratio]{#1}
            
        }
        {
            \includegraphics{#1}
        }
    }
}
\newlength{\thislabelwidth}
\DeclareMathOperator{\abs}{abs}
\usepackage{animate} % This package is required because the wxMaxima configuration option
                      % "Export animations to TeX" was enabled when this file was generated.

\definecolor{labelcolor}{RGB}{100,0,0}

\usepackage{fullpage}
\usepackage{amssymb}
\usepackage{enumerate}
\usepackage[bookmarks=false,pdfstartview={FitH},colorlinks=true,urlcolor=blue]{hyperref}
\usepackage{bookmark}
\usepackage{mathtools}

\begin{document}

\pagebreak{}
{\Huge {\sc Cartan formalism}}
\setcounter{section}{0}
\setcounter{subsection}{0}
\setcounter{figure}{0}


\hypersetup{pdfauthor={Daniel Volinski},
            pdftitle={Cartan formalism},
            pdfsubject={Gravitational Physics},
            pdfkeywords={Ruth Gregory}}

Based on Narcos Alpha Playlist
\href{https://www.youtube.com/playlist?list=PLhS8YPbZkfgIxU3dwrqsj30E9FJqNAMOj}
{PSI 18/19 - Gravitational Physics Review}

Written by Daniel Volinski at \href{mailto:danielvolinski@yahoo.es}{danielvolinski@yahoo.es}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i2) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
info:build\_info()\$info\ensuremath{@}version;
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o2}\label{o2} 
\mbox{}
\]5.38.1



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i2) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
reset()\$kill(all)\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i1) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
derivabbrev:true\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i2) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ratprint:false\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i3) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
fpprintprec:5\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i4) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
if get('vect,'version)=false then load(vect)\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i5) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
if get('cartan,'version)=false then load(cartan)\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i6) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
if get('format,'version)=false then load(format)\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i7) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
norm(u):=block(ratsimp(radcan(\ensuremath{\sqrt{}}(u.u))))\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i8) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
normalize(v):=block(v/norm(v))\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i9) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
angle(u,v):=block([junk:radcan(\ensuremath{\sqrt{}}((u.u)*(v.v)))],acos(u.v/junk))\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i10) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
mycross(va,vb):=[va[2]*vb[3]-va[3]*vb[2],va[3]*vb[1]-va[1]*vb[3],va[1]*vb[2]-va[2]*vb[1]]\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i11) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
declare(trigsimp,evfun)\$
\end{minipage}
\pagebreak


\section{Polar coordinates}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i12) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
kill(labels,Tr,\ensuremath{\xi},r,\ensuremath{\theta})\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i2) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
assume(0\ensuremath{\leq}r)\$\\
assume(0\ensuremath{\leq}\ensuremath{\theta},\ensuremath{\theta}\ensuremath{\leq}2*\ensuremath{\pi})\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i3) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
\ensuremath{\xi}:[r,\ensuremath{\theta}]\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i4) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
dim:length(\ensuremath{\xi})\$
\end{minipage}

\textbf{Transformation formula}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i5) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
Tr:[r*cos(\ensuremath{\theta}),r*sin(\ensuremath{\theta})]\$
\end{minipage}

\textbf{Initialize vect package}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i6) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
scalefactors(append([Tr],\ensuremath{\xi}))\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i7) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
sf:reverse(rest(reverse(sf)));
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{sf}\label{sf}
[1,r]\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i8) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
sfprod;
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o8}\label{o8} 
r\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i9) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
dimension;
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o9}\label{o9} 
2\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Jacobian}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i10) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
J:jacobian(Tr,\ensuremath{\xi});
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{J}\label{J}
\begin{pmatrix}\cos{\left( \mathit{\ensuremath{\theta}}\right) } & -r\,\sin{\left( \mathit{\ensuremath{\theta}}\right) }\\
\sin{\left( \mathit{\ensuremath{\theta}}\right) } & r\,\cos{\left( \mathit{\ensuremath{\theta}}\right) }\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Covariant metric tensor}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i11) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
lg:trigsimp(transpose(J).J);
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{lg}\label{lg}
\begin{pmatrix}1 & 0\\
0 & {{r}^{2}}\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i12) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
Jdet:trigsimp(determinant(J));
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{Jdet}\label{Jdet}
r\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Contravariant metric tensor}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i13) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ug:invert(lg);
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{ug}\label{ug}
\begin{pmatrix}1 & 0\\
0 & \frac{1}{{{r}^{2}}}\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Line element}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i14) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(ds\ensuremath{^2}=diff(\ensuremath{\xi}).lg.transpose(diff(\ensuremath{\xi})))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t14}\label{t14} 
{{\mathit{ds}}^{2}}={{r}^{2}}\,{{\operatorname{del}\left( \mathit{\ensuremath{\theta}}\right) }^{2}}+{{\operatorname{del}(r)}^{2}}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Define the frame}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i16) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
e[r]:\ensuremath{\sqrt{}}(ug)[1]\$\\
e[\ensuremath{\theta}]:\ensuremath{\sqrt{}}(ug)[2]\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i17) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(e:apply('matrix,[e[r],e[\ensuremath{\theta}]]))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t17}\label{t17} 
e=\begin{pmatrix}1 & 0\\
0 & \frac{1}{r}\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Initialize cartan package}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i18) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
init\_cartan(\ensuremath{\xi})\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i19) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
cartan\_basis;
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o19}\label{o19} 
[\mathit{dr},\mathit{d\ensuremath{\theta}}]\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i20) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
cartan\_coords;
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o20}\label{o20} 
[r,\mathit{\ensuremath{\theta}}]\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i21) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
cartan\_dim;
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o21}\label{o21} 
2\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i22) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
extdim;
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o22}\label{o22} 
2\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Define the coframe} $\omega$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i25) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
\ensuremath{\omega}[r]:dr\$\\
\ensuremath{\omega}[\ensuremath{\theta}]:r*d\ensuremath{\theta}\$\\
ldisplay(\ensuremath{\omega}:[\ensuremath{\omega}[r],\ensuremath{\omega}[\ensuremath{\theta}]])\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t25}\label{t25} 
\mathit{\ensuremath{\omega}}=[\mathit{dr},r\,\mathit{d\ensuremath{\theta}}]\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Verify} $\langle\underline{\omega}^{\color{red} a}
\mid \underline{e}_{\color{red} b}\rangle=
\delta^{\color{red} a}_{\color{red} b}$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i26) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
genmatrix(lambda([i,j],e[\ensuremath{\xi}[i]]|\ensuremath{\omega}[\ensuremath{\xi}[j]]),cartan\_dim,cartan\_dim);
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o26}\label{o26} 
\begin{pmatrix}1 & 0\\
0 & 1\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\pagebreak
\textbf{Calculate the external derivative of the coframe}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i27) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(d\ensuremath{\omega}:ext\_diff(\ensuremath{\omega}))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t27}\label{t27} 
\mathit{d\ensuremath{\omega}}=[0,\mathit{dr}\,\mathit{d\ensuremath{\theta}}]\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Generic Connection 1-form} $\Theta$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i28) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
A:[a\_1,a\_2]\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i32) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
kill(\ensuremath{\Theta})\$\\
\ensuremath{\Theta}:zeromatrix(dim,dim)\$\\
\ensuremath{\Theta}[1,2]:-\ensuremath{\Theta}[2,1]:A.cartan\_basis\$\\
ldisplay(\ensuremath{\Theta})\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t32}\label{t32} 
\mathit{\ensuremath{\Theta}}=\begin{pmatrix}0 & -{{a}_{2}}\mathit{d\ensuremath{\theta}}-{{a}_{1}}\mathit{dr}\\
{{a}_{2}}\mathit{d\ensuremath{\theta}}+{{a}_{1}}\mathit{dr} & 0\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Change matrix multiplication operator}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i33) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
matrix\_element\_mult:"\ensuremath{\sim }"\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i34) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(\ensuremath{\lambda}:list\_matrix\_entries(expand(\ensuremath{\Theta}.\ensuremath{\omega})))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t34}\label{t34} 
\mathit{\ensuremath{\lambda}}=[-{{a}_{1}}r\,\mathit{dr}\,\mathit{d\ensuremath{\theta}},-{{a}_{2}}\mathit{dr}\,\mathit{d\ensuremath{\theta}}]\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Restore matrix multiplication operator}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i35) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
matrix\_element\_mult:"*"\$
\end{minipage}

\textbf{Cartan's First structural equation}
$\mathrm{d}\omega^{\color{red} i}=
\Theta_{\color{blue} j}^{\color{red} i}
\wedge\omega^{\color{blue} j}$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i36) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
Eq:zeromatrix(dim,dim)\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i37) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
for i thru dim do for j thru dim do\\
Eq[i,j]:format(coeff(coeff(d\ensuremath{\omega},cartan\_basis[i]),cartan\_basis[j])=\\
coeff(coeff(-\ensuremath{\lambda},cartan\_basis[i]),cartan\_basis[j]),\%list)\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i38) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
Eqs:apply('append,list\_matrix\_entries(Eq))\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i39) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
linsol:linsolve(Eqs,A);
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\mbox{}\\\mbox{solve: dependent equations eliminated: (1 8 7 2 4 3)}\mbox{}\]
\[\tag{linsol}\label{linsol}
[{{a}_{1}}=0,{{a}_{2}}=1]\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i40) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(\ensuremath{\lambda}:at(\ensuremath{\lambda},linsol))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t40}\label{t40} 
\mathit{\ensuremath{\lambda}}=[0,-\mathit{dr}\,\mathit{d\ensuremath{\theta}}]\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i41) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
is(d\ensuremath{\omega}=-\ensuremath{\lambda});
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o41}\label{o41} 
\mbox{true}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Update Connection 1-form} $\Theta$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i42) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(\ensuremath{\Theta}:at(\ensuremath{\Theta},linsol))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t42}\label{t42} 
\mathit{\ensuremath{\Theta}}=\begin{pmatrix}0 & -\mathit{d\ensuremath{\theta}}\\
\mathit{d\ensuremath{\theta}} & 0\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Update Connection 2-form} $\mathrm{d}\Theta$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i43) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(d\ensuremath{\Theta}:trigsimp(matrixmap(edit,ext\_diff(\ensuremath{\Theta}))))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t43}\label{t43} 
\mathit{d\ensuremath{\Theta}}=\begin{pmatrix}0 & 0\\
0 & 0\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Update coefficients}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i44) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(A:at(A,linsol))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t44}\label{t44} 
A=[0,1]\mbox{}
\]
%%%%%%%%%%%%%%%
\textbf{Change matrix multiplication operator}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i45) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
matrix\_element\_mult:"\ensuremath{\sim }"\$
\end{minipage}

\textbf{Cartan's Second structural equation}:
$\Omega_{\color{red} j}^{\color{red} i}=
\mathrm{d}\Theta_{\color{red} j}^{\color{red} i}+
\Theta_{\color{blue} k}^{\color{red} i}\wedge
\Theta_{\color{red} j}^{\color{blue} k}$


\textbf{Curvature 2-form} $\Omega$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i46) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(\ensuremath{\Omega}:matrixmap(edit,d\ensuremath{\Theta}+\ensuremath{\Theta}.\ensuremath{\Theta}))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t46}\label{t46} 
\mathit{\ensuremath{\Omega}}=\begin{pmatrix}0 & 0\\
0 & 0\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Restore matrix multiplication operator}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i47) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
matrix\_element\_mult:"*"\$
\end{minipage}

\textbf{Forms in terms of the coframe} $\sigma$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i48) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
Eqs:makelist(\ensuremath{\sigma}[\ensuremath{\xi}[i]]=\ensuremath{\omega}[\ensuremath{\xi}[i]],i,1,cartan\_dim);
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{Eqs}\label{Eqs}
[{{\mathit{\ensuremath{\sigma}}}_{r}}=\mathit{dr},{{\mathit{\ensuremath{\sigma}}}_{\mathit{\ensuremath{\theta}}}}=r\,\mathit{d\ensuremath{\theta}}]\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i49) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
linsol:linsolve(Eqs,cartan\_basis);
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{linsol}\label{linsol}
\left[\mathit{dr}={{\mathit{\ensuremath{\sigma}}}_{r}},\mathit{d\ensuremath{\theta}}=\frac{{{\mathit{\ensuremath{\sigma}}}_{\mathit{\ensuremath{\theta}}}}}{r}\right]\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Connection 1-form} $\Theta$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i50) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(\ensuremath{\Theta}:ev(\ensuremath{\Theta},linsol,fullratsimp))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t50}\label{t50} 
\mathit{\ensuremath{\Theta}}=\begin{pmatrix}0 & -\frac{{{\mathit{\ensuremath{\sigma}}}_{\mathit{\ensuremath{\theta}}}}}{r}\\
\frac{{{\mathit{\ensuremath{\sigma}}}_{\mathit{\ensuremath{\theta}}}}}{r} & 0\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Curvature 2-form} $\Omega$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i51) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(\ensuremath{\Omega}:ev(\ensuremath{\Omega},linsol,fullratsimp))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t51}\label{t51} 
\mathit{\ensuremath{\Omega}}=\begin{pmatrix}0 & 0\\
0 & 0\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Clean up}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i53) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
forget(0\ensuremath{\leq}r)\$\\
forget(0\ensuremath{\leq}\ensuremath{\theta},\ensuremath{\theta}\ensuremath{\leq}2*\ensuremath{\pi})\$
\end{minipage}
\pagebreak


\section{2-Sphere}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i54) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
kill(labels,Tr,\ensuremath{\xi},\ensuremath{\theta},\ensuremath{\phi})\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i3) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
assume(0\ensuremath{\leq}\ensuremath{\theta},\ensuremath{\theta}\ensuremath{\leq}\ensuremath{\pi})\$\\
assume(0\ensuremath{\leq}sin(\ensuremath{\theta}))\$\\
assume(0\ensuremath{\leq}\ensuremath{\phi},\ensuremath{\phi}\ensuremath{\leq}2*\ensuremath{\pi})\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i4) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
\ensuremath{\xi}:[\ensuremath{\theta},\ensuremath{\phi}]\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i5) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
dim:length(\ensuremath{\xi})\$
\end{minipage}

\textbf{Transformation formula}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i6) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
Tr:[sin(\ensuremath{\theta})*cos(\ensuremath{\phi}),sin(\ensuremath{\theta})*sin(\ensuremath{\phi}),cos(\ensuremath{\theta})]\$
\end{minipage}

\textbf{Initialize vect package}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i7) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
scalefactors(append([Tr],\ensuremath{\xi}))\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i8) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
sf;
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o8}\label{o8} 
[1,\sin{\left( \mathit{\ensuremath{\theta}}\right) }]\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i9) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
sfprod;
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o9}\label{o9} 
\sin{\left( \mathit{\ensuremath{\theta}}\right) }\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i10) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
dimension;
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o10}\label{o10} 
2\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Jacobian}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i11) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
J:jacobian(Tr,\ensuremath{\xi});
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{J}\label{J}
\begin{pmatrix}\cos{\left( \mathit{\ensuremath{\theta}}\right) }\,\cos{\left( \mathit{\ensuremath{\phi}}\right) } & -\sin{\left( \mathit{\ensuremath{\theta}}\right) }\,\sin{\left( \mathit{\ensuremath{\phi}}\right) }\\
\cos{\left( \mathit{\ensuremath{\theta}}\right) }\,\sin{\left( \mathit{\ensuremath{\phi}}\right) } & \sin{\left( \mathit{\ensuremath{\theta}}\right) }\,\cos{\left( \mathit{\ensuremath{\phi}}\right) }\\
-\sin{\left( \mathit{\ensuremath{\theta}}\right) } & 0\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Covariant metric tensor}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i12) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
lg:trigsimp(transpose(J).J);
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{lg}\label{lg}
\begin{pmatrix}1 & 0\\
0 & {{\sin{\left( \mathit{\ensuremath{\theta}}\right) }}^{2}}\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Contravariant metric tensor}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i13) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ug:invert(lg);
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{ug}\label{ug}
\begin{pmatrix}1 & 0\\
0 & \frac{1}{{{\sin{\left( \mathit{\ensuremath{\theta}}\right) }}^{2}}}\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Line element}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i14) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(ds\ensuremath{^2}=diff(\ensuremath{\xi}).lg.transpose(diff(\ensuremath{\xi})))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t14}\label{t14} 
{{\mathit{ds}}^{2}}={{\sin{\left( \mathit{\ensuremath{\theta}}\right) }}^{2}}\,{{\operatorname{del}\left( \mathit{\ensuremath{\phi}}\right) }^{2}}+{{\operatorname{del}\left( \mathit{\ensuremath{\theta}}\right) }^{2}}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Define the frame}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i16) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
e[\ensuremath{\theta}]:\ensuremath{\sqrt{}}(ug)[1]\$\\
e[\ensuremath{\phi}]:\ensuremath{\sqrt{}}(ug)[2]\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i17) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(e:apply('matrix,[e[\ensuremath{\theta}],e[\ensuremath{\phi}]]))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t17}\label{t17} 
e=\begin{pmatrix}1 & 0\\
0 & \frac{1}{\sin{\left( \mathit{\ensuremath{\theta}}\right) }}\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Initialize cartan package}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i18) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
init\_cartan(\ensuremath{\xi})\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i19) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
cartan\_basis;
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o19}\label{o19} 
[\mathit{d\ensuremath{\theta}},\mathit{d\ensuremath{\phi}}]\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i20) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
cartan\_coords;
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o20}\label{o20} 
[\mathit{\ensuremath{\theta}},\mathit{\ensuremath{\phi}}]\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i21) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
cartan\_dim;
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o21}\label{o21} 
2\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i22) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
extdim;
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o22}\label{o22} 
2\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Define the coframe} $\omega$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i25) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
\ensuremath{\omega}[\ensuremath{\theta}]:d\ensuremath{\theta}\$\\
\ensuremath{\omega}[\ensuremath{\phi}]:sin(\ensuremath{\theta})*d\ensuremath{\phi}\$\\
ldisplay(\ensuremath{\omega}:[\ensuremath{\omega}[\ensuremath{\theta}],\ensuremath{\omega}[\ensuremath{\phi}]])\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t25}\label{t25} 
\mathit{\ensuremath{\omega}}=[\mathit{d\ensuremath{\theta}},\mathit{d\ensuremath{\phi}}\,\sin{\left( \mathit{\ensuremath{\theta}}\right) }]\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Verify} $\langle\underline{\omega}^{\color{red} a}
\mid \underline{e}_{\color{red} b}\rangle=
\delta^{\color{red} a}_{\color{red} b}$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i26) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
genmatrix(lambda([i,j],e[\ensuremath{\xi}[i]]|\ensuremath{\omega}[\ensuremath{\xi}[j]]),cartan\_dim,cartan\_dim);
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o26}\label{o26} 
\begin{pmatrix}1 & 0\\
0 & 1\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Calculate the external derivative of the coframe}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i27) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(d\ensuremath{\omega}:ext\_diff(\ensuremath{\omega}))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t27}\label{t27} 
\mathit{d\ensuremath{\omega}}=[0,\mathit{d\ensuremath{\theta}}\,\mathit{d\ensuremath{\phi}}\,\cos{\left( \mathit{\ensuremath{\theta}}\right) }]\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Generic Connection 1-form} $\Theta$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i28) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
A:[a\_1,a\_2]\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i32) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
kill(\ensuremath{\Theta})\$\\
\ensuremath{\Theta}:zeromatrix(dim,dim)\$\\
\ensuremath{\Theta}[1,2]:-\ensuremath{\Theta}[2,1]:A.cartan\_basis\$\\
ldisplay(\ensuremath{\Theta})\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t32}\label{t32} 
\mathit{\ensuremath{\Theta}}=\begin{pmatrix}0 & -{{a}_{2}}\mathit{d\ensuremath{\phi}}-{{a}_{1}}\mathit{d\ensuremath{\theta}}\\
{{a}_{2}}\mathit{d\ensuremath{\phi}}+{{a}_{1}}\mathit{d\ensuremath{\theta}} & 0\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Change matrix multiplication operator}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i33) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
matrix\_element\_mult:"\ensuremath{\sim }"\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i34) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(\ensuremath{\lambda}:list\_matrix\_entries(expand(\ensuremath{\Theta}.\ensuremath{\omega})))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t34}\label{t34} 
\mathit{\ensuremath{\lambda}}=[-{{a}_{1}}\mathit{d\ensuremath{\theta}}\,\mathit{d\ensuremath{\phi}}\,\sin{\left( \mathit{\ensuremath{\theta}}\right) },-{{a}_{2}}\mathit{d\ensuremath{\theta}}\,\mathit{d\ensuremath{\phi}}]\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Restore matrix multiplication operator}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i35) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
matrix\_element\_mult:"*"\$
\end{minipage}

\textbf{Cartan's First structural equation}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i36) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
Eq:zeromatrix(dim,dim)\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i37) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
for i thru dim do for j thru dim do\\
Eq[i,j]:format(coeff(coeff(d\ensuremath{\omega},cartan\_basis[i]),cartan\_basis[j])=\\
coeff(coeff(-\ensuremath{\lambda},cartan\_basis[i]),cartan\_basis[j]),\%list)\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i38) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
Eqs:apply('append,list\_matrix\_entries(Eq))\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i39) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
linsol:linsolve(Eqs,A);
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\mbox{}\\\mbox{solve: dependent equations eliminated: (1 8 7 2 3 4)}\mbox{}\]
\[\tag{linsol}\label{linsol}
[{{a}_{1}}=0,{{a}_{2}}=\cos{\left( \mathit{\ensuremath{\theta}}\right) }]\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i40) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(\ensuremath{\lambda}:at(\ensuremath{\lambda},linsol))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t40}\label{t40} 
\mathit{\ensuremath{\lambda}}=[0,-\mathit{d\ensuremath{\theta}}\,\mathit{d\ensuremath{\phi}}\,\cos{\left( \mathit{\ensuremath{\theta}}\right) }]\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i41) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
is(d\ensuremath{\omega}=-\ensuremath{\lambda});
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o41}\label{o41} 
\mbox{true}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Update Connection 1-form} $\Theta$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i42) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(\ensuremath{\Theta}:at(\ensuremath{\Theta},linsol))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t42}\label{t42} 
\mathit{\ensuremath{\Theta}}=\begin{pmatrix}0 & -\mathit{d\ensuremath{\phi}}\,\cos{\left( \mathit{\ensuremath{\theta}}\right) }\\
\mathit{d\ensuremath{\phi}}\,\cos{\left( \mathit{\ensuremath{\theta}}\right) } & 0\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Update Connection 2-form} $\mathrm{d}\Theta$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i43) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(d\ensuremath{\Theta}:trigsimp(matrixmap(edit,ext\_diff(\ensuremath{\Theta}))))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t43}\label{t43} 
\mathit{d\ensuremath{\Theta}}=\begin{pmatrix}0 & \mathit{d\ensuremath{\theta}}\,\mathit{d\ensuremath{\phi}}\,\sin{\left( \mathit{\ensuremath{\theta}}\right) }\\
-\mathit{d\ensuremath{\theta}}\,\mathit{d\ensuremath{\phi}}\,\sin{\left( \mathit{\ensuremath{\theta}}\right) } & 0\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Update coefficients}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i44) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(A:at(A,linsol))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t44}\label{t44} 
A=[0,\cos{\left( \mathit{\ensuremath{\theta}}\right) }]\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Change matrix multiplication operator}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i45) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
matrix\_element\_mult:"\ensuremath{\sim }"\$
\end{minipage}

\textbf{Cartan's Second structural equation}:
$\Omega_{\color{red} j}^{\color{red} i}=
\mathrm{d}\Theta_{\color{red} j}^{\color{red} i}+
\Theta_{\color{blue} k}^{\color{red} i}\wedge
\Theta_{\color{red} j}^{\color{blue} k}$


\textbf{Curvature 2-form} $\Omega$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i46) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(\ensuremath{\Omega}:matrixmap(edit,d\ensuremath{\Theta}+\ensuremath{\Theta}.\ensuremath{\Theta}))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t46}\label{t46} 
\mathit{\ensuremath{\Omega}}=\begin{pmatrix}0 & \mathit{d\ensuremath{\theta}}\,\mathit{d\ensuremath{\phi}}\,\sin{\left( \mathit{\ensuremath{\theta}}\right) }\\
-\mathit{d\ensuremath{\theta}}\,\mathit{d\ensuremath{\phi}}\,\sin{\left( \mathit{\ensuremath{\theta}}\right) } & 0\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Restore matrix multiplication operator}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i47) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
matrix\_element\_mult:"*"\$
\end{minipage}

\textbf{Forms in terms of the coframe} $\sigma$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i48) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
Eqs:makelist(\ensuremath{\sigma}[\ensuremath{\xi}[i]]=\ensuremath{\omega}[\ensuremath{\xi}[i]],i,1,cartan\_dim);
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{Eqs}\label{Eqs}
[{{\mathit{\ensuremath{\sigma}}}_{\mathit{\ensuremath{\theta}}}}=\mathit{d\ensuremath{\theta}},{{\mathit{\ensuremath{\sigma}}}_{\mathit{\ensuremath{\phi}}}}=\mathit{d\ensuremath{\phi}}\,\sin{\left( \mathit{\ensuremath{\theta}}\right) }]\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i49) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
linsol:linsolve(Eqs,cartan\_basis);
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{linsol}\label{linsol}
\left[\mathit{d\ensuremath{\theta}}={{\mathit{\ensuremath{\sigma}}}_{\mathit{\ensuremath{\theta}}}},\mathit{d\ensuremath{\phi}}=\frac{{{\mathit{\ensuremath{\sigma}}}_{\mathit{\ensuremath{\phi}}}}}{\sin{\left( \mathit{\ensuremath{\theta}}\right) }}\right]\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Connection 1-form} $\Theta$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i50) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(\ensuremath{\Theta}:ev(\ensuremath{\Theta},linsol,fullratsimp))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t50}\label{t50} 
\mathit{\ensuremath{\Theta}}=\begin{pmatrix}0 & -\frac{\cos{\left( \mathit{\ensuremath{\theta}}\right) }\,{{\mathit{\ensuremath{\sigma}}}_{\mathit{\ensuremath{\phi}}}}}{\sin{\left( \mathit{\ensuremath{\theta}}\right) }}\\
\frac{\cos{\left( \mathit{\ensuremath{\theta}}\right) }\,{{\mathit{\ensuremath{\sigma}}}_{\mathit{\ensuremath{\phi}}}}}{\sin{\left( \mathit{\ensuremath{\theta}}\right) }} & 0\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Curvature 2-form} $\Omega$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i51) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(\ensuremath{\Omega}:ev(\ensuremath{\Omega},linsol,fullratsimp))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t51}\label{t51} 
\mathit{\ensuremath{\Omega}}=\begin{pmatrix}0 & {{\mathit{\ensuremath{\sigma}}}_{\mathit{\ensuremath{\theta}}}}\,{{\mathit{\ensuremath{\sigma}}}_{\mathit{\ensuremath{\phi}}}}\\
-{{\mathit{\ensuremath{\sigma}}}_{\mathit{\ensuremath{\theta}}}}\,{{\mathit{\ensuremath{\sigma}}}_{\mathit{\ensuremath{\phi}}}} & 0\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Clean up}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i54) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
forget(0\ensuremath{\leq}\ensuremath{\theta},\ensuremath{\theta}\ensuremath{\leq}\ensuremath{\pi})\$\\
forget(0\ensuremath{\leq}sin(\ensuremath{\theta}))\$\\
forget(0\ensuremath{\leq}\ensuremath{\phi},\ensuremath{\phi}\ensuremath{\leq}2*\ensuremath{\pi})\$
\end{minipage}
\pagebreak


\section{Spherical coordinates}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i12) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
kill(labels,Tr,\ensuremath{\xi},r,\ensuremath{\theta},\ensuremath{\phi})\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i4) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
assume(0\ensuremath{\leq}r)\$\\
assume(0\ensuremath{\leq}\ensuremath{\theta},\ensuremath{\theta}\ensuremath{\leq}\ensuremath{\pi})\$\\
assume(0\ensuremath{\leq}sin(\ensuremath{\theta}))\$\\
assume(0\ensuremath{\leq}\ensuremath{\phi},\ensuremath{\phi}\ensuremath{\leq}2*\ensuremath{\pi})\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i5) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
\ensuremath{\xi}:[r,\ensuremath{\theta},\ensuremath{\phi}]\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i6) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
dim:length(\ensuremath{\xi})\$
\end{minipage}

\textbf{Transformation formula}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i7) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
Tr:[r*sin(\ensuremath{\theta})*cos(\ensuremath{\phi}),r*sin(\ensuremath{\theta})*sin(\ensuremath{\phi}),r*cos(\ensuremath{\theta})]\$
\end{minipage}

\textbf{Initialize vect package}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i8) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
scalefactors(append([Tr],\ensuremath{\xi}))\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i9) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
sf;
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o9}\label{o9} 
[1,r,r\,\sin{\left( \mathit{\ensuremath{\theta}}\right) }]\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i10) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
sfprod;
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o10}\label{o10} 
{{r}^{2}}\,\sin{\left( \mathit{\ensuremath{\theta}}\right) }\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i11) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
dimension;
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o11}\label{o11} 
3\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Jacobian}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i12) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(J:jacobian(Tr,\ensuremath{\xi}))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t12}\label{t12} 
J=\begin{pmatrix}\sin{\left( \mathit{\ensuremath{\theta}}\right) }\,\cos{\left( \mathit{\ensuremath{\phi}}\right) } & r\,\cos{\left( \mathit{\ensuremath{\theta}}\right) }\,\cos{\left( \mathit{\ensuremath{\phi}}\right) } & -r\,\sin{\left( \mathit{\ensuremath{\theta}}\right) }\,\sin{\left( \mathit{\ensuremath{\phi}}\right) }\\
\sin{\left( \mathit{\ensuremath{\theta}}\right) }\,\sin{\left( \mathit{\ensuremath{\phi}}\right) } & r\,\cos{\left( \mathit{\ensuremath{\theta}}\right) }\,\sin{\left( \mathit{\ensuremath{\phi}}\right) } & r\,\sin{\left( \mathit{\ensuremath{\theta}}\right) }\,\cos{\left( \mathit{\ensuremath{\phi}}\right) }\\
\cos{\left( \mathit{\ensuremath{\theta}}\right) } & -r\,\sin{\left( \mathit{\ensuremath{\theta}}\right) } & 0\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Covariant metric tensor}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i13) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
lg:trigsimp(transpose(J).J);
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{lg}\label{lg}
\begin{pmatrix}1 & 0 & 0\\
0 & {{r}^{2}} & 0\\
0 & 0 & {{r}^{2}}\,{{\sin{\left( \mathit{\ensuremath{\theta}}\right) }}^{2}}\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i14) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
Jdet:trigsimp(determinant(J));
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{Jdet}\label{Jdet}
{{r}^{2}}\,\sin{\left( \mathit{\ensuremath{\theta}}\right) }\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Line element}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i15) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(ds\ensuremath{^2}=diff(\ensuremath{\xi}).lg.transpose(diff(\ensuremath{\xi})))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t15}\label{t15} 
{{\mathit{ds}}^{2}}={{r}^{2}}\,{{\sin{\left( \mathit{\ensuremath{\theta}}\right) }}^{2}}\,{{\operatorname{del}\left( \mathit{\ensuremath{\phi}}\right) }^{2}}+{{r}^{2}}\,{{\operatorname{del}\left( \mathit{\ensuremath{\theta}}\right) }^{2}}+{{\operatorname{del}(r)}^{2}}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Define the frame}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i18) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
e[r]:[1,0,0]\$\\
e[\ensuremath{\theta}]:[0,1/r,0]\$\\
e[\ensuremath{\phi}]:[0,0,1/r/sin(\ensuremath{\theta})]\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i19) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(e:apply('matrix,[e[r],e[\ensuremath{\theta}],e[\ensuremath{\phi}]]))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t19}\label{t19} 
e=\begin{pmatrix}1 & 0 & 0\\
0 & \frac{1}{r} & 0\\
0 & 0 & \frac{1}{r\,\sin{\left( \mathit{\ensuremath{\theta}}\right) }}\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Initialize cartan package}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i20) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
init\_cartan(\ensuremath{\xi})\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i21) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
cartan\_basis;
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o21}\label{o21} 
[\mathit{dr},\mathit{d\ensuremath{\theta}},\mathit{d\ensuremath{\phi}}]\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i22) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
cartan\_coords;
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o22}\label{o22} 
[r,\mathit{\ensuremath{\theta}},\mathit{\ensuremath{\phi}}]\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i23) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
cartan\_dim;
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o23}\label{o23} 
3\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i24) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
extdim;
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o24}\label{o24} 
3\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Define the coframe} $\omega$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i28) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
\ensuremath{\omega}[r]:dr\$\\
\ensuremath{\omega}[\ensuremath{\theta}]:r*d\ensuremath{\theta}\$\\
\ensuremath{\omega}[\ensuremath{\phi}]:r*sin(\ensuremath{\theta})*d\ensuremath{\phi}\$\\
ldisplay(\ensuremath{\omega}:[\ensuremath{\omega}[r],\ensuremath{\omega}[\ensuremath{\theta}],\ensuremath{\omega}[\ensuremath{\phi}]])\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t28}\label{t28} 
\mathit{\ensuremath{\omega}}=[\mathit{dr},r\,\mathit{d\ensuremath{\theta}},r\,\mathit{d\ensuremath{\phi}}\,\sin{\left( \mathit{\ensuremath{\theta}}\right) }]\mbox{}
\]
%%%%%%%%%%%%%%%

\pagebreak
\textbf{Verify}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i29) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
genmatrix(lambda([i,j],e[\ensuremath{\xi}[i]]|\ensuremath{\omega}[\ensuremath{\xi}[j]]),cartan\_dim,cartan\_dim);
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o29}\label{o29} 
\begin{pmatrix}1 & 0 & 0\\
0 & 1 & 0\\
0 & 0 & 1\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Calculate the external derivative of the coframe}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i30) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(d\ensuremath{\omega}:ext\_diff(\ensuremath{\omega}))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t30}\label{t30} 
\mathit{d\ensuremath{\omega}}=[0,\mathit{dr}\,\mathit{d\ensuremath{\theta}},\mathit{dr}\,\mathit{d\ensuremath{\phi}}\,\sin{\left( \mathit{\ensuremath{\theta}}\right) }+r\,\mathit{d\ensuremath{\theta}}\,\mathit{d\ensuremath{\phi}}\,\cos{\left( \mathit{\ensuremath{\theta}}\right) }]\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Generic Connection 1-form} $\Theta$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i33) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
A:[a\_1,a\_2,a\_3]\$\\
B:[b\_1,b\_2,b\_3]\$\\
C:[c\_1,c\_2,c\_3]\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i39) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
kill(\ensuremath{\Theta})\$\\
\ensuremath{\Theta}:zeromatrix(dim,dim)\$\\
\ensuremath{\Theta}[1,2]:-\ensuremath{\Theta}[2,1]:A.cartan\_basis\$\\
\ensuremath{\Theta}[1,3]:-\ensuremath{\Theta}[3,1]:B.cartan\_basis\$\\
\ensuremath{\Theta}[2,3]:-\ensuremath{\Theta}[3,2]:C.cartan\_basis\$\\
ldisplay(\ensuremath{\Theta})\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t39}\label{t39} 
\mathit{\ensuremath{\Theta}}=\begin{pmatrix}0 & -{{a}_{3}}\mathit{d\ensuremath{\phi}}-{{a}_{2}}\mathit{d\ensuremath{\theta}}-{{a}_{1}}\mathit{dr} & -{{b}_{3}}\mathit{d\ensuremath{\phi}}-{{b}_{2}}\mathit{d\ensuremath{\theta}}-{{b}_{1}}\mathit{dr}\\
{{a}_{3}}\mathit{d\ensuremath{\phi}}+{{a}_{2}}\mathit{d\ensuremath{\theta}}+{{a}_{1}}\mathit{dr} & 0 & -{{c}_{3}}\mathit{d\ensuremath{\phi}}-{{c}_{2}}\mathit{d\ensuremath{\theta}}-{{c}_{1}}\mathit{dr}\\
{{b}_{3}}\mathit{d\ensuremath{\phi}}+{{b}_{2}}\mathit{d\ensuremath{\theta}}+{{b}_{1}}\mathit{dr} & {{c}_{3}}\mathit{d\ensuremath{\phi}}+{{c}_{2}}\mathit{d\ensuremath{\theta}}+{{c}_{1}}\mathit{dr} & 0\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Change matrix multiplication operator}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i40) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
matrix\_element\_mult:"\ensuremath{\sim }"\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i41) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
\ensuremath{\lambda}:list\_matrix\_entries(expand(\ensuremath{\Theta}.\ensuremath{\omega}))\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i42) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
map(ldisp,\ensuremath{\lambda})\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t42}\label{t42} 
-{{b}_{2}}r\,\mathit{d\ensuremath{\theta}}\,\mathit{d\ensuremath{\phi}}\,\sin{\left( \mathit{\ensuremath{\theta}}\right) }-{{b}_{1}}r\,\mathit{dr}\,\mathit{d\ensuremath{\phi}}\,\sin{\left( \mathit{\ensuremath{\theta}}\right) }+{{a}_{3}}r\,\mathit{d\ensuremath{\theta}}\,\mathit{d\ensuremath{\phi}}-{{a}_{1}}r\,\mathit{dr}\,\mathit{d\ensuremath{\theta}}\mbox{}\]
\[\tag{\%{}t43}\label{t43} 
-{{c}_{2}}r\,\mathit{d\ensuremath{\theta}}\,\mathit{d\ensuremath{\phi}}\,\sin{\left( \mathit{\ensuremath{\theta}}\right) }-{{c}_{1}}r\,\mathit{dr}\,\mathit{d\ensuremath{\phi}}\,\sin{\left( \mathit{\ensuremath{\theta}}\right) }-{{a}_{3}}\mathit{dr}\,\mathit{d\ensuremath{\phi}}-{{a}_{2}}\mathit{dr}\,\mathit{d\ensuremath{\theta}}\mbox{}\]
\[\tag{\%{}t44}\label{t44} 
-{{c}_{3}}r\,\mathit{d\ensuremath{\theta}}\,\mathit{d\ensuremath{\phi}}-{{b}_{3}}\mathit{dr}\,\mathit{d\ensuremath{\phi}}+{{c}_{1}}r\,\mathit{dr}\,\mathit{d\ensuremath{\theta}}-{{b}_{2}}\mathit{dr}\,\mathit{d\ensuremath{\theta}}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Restore matrix multiplication operator}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i45) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
matrix\_element\_mult:"*"\$
\end{minipage}

\textbf{Cartan's First structural equation}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i46) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
Eq:zeromatrix(dim,dim)\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i47) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
for i thru dim do for j thru dim do\\
Eq[i,j]:format(coeff(coeff(d\ensuremath{\omega},cartan\_basis[i]),cartan\_basis[j])=\\
coeff(coeff(-\ensuremath{\lambda},cartan\_basis[i]),cartan\_basis[j]),\%list)\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i48) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
Eqs:apply('append,list\_matrix\_entries(Eq))\$
\end{minipage}


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i49) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
linsol:linsolve(Eqs,append(A,B,C));
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\mbox{}\\\mbox{solve: dependent equations eliminated: (1 27 26 25 2 3 13 14 15 11 10 17 19 12 16 20 21 18)}\mbox{}\]
\[\tag{linsol}\label{linsol}
[{{a}_{1}}=0,{{a}_{2}}=1,{{a}_{3}}=0,{{b}_{1}}=0,{{b}_{2}}=0,{{b}_{3}}=\sin{\left( \mathit{\ensuremath{\theta}}\right) },{{c}_{1}}=0,{{c}_{2}}=0,{{c}_{3}}=\cos{\left( \mathit{\ensuremath{\theta}}\right) }]\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i50) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(\ensuremath{\lambda}:at(\ensuremath{\lambda},linsol))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t50}\label{t50} 
\mathit{\ensuremath{\lambda}}=[0,-\mathit{dr}\,\mathit{d\ensuremath{\theta}},-\mathit{dr}\,\mathit{d\ensuremath{\phi}}\,\sin{\left( \mathit{\ensuremath{\theta}}\right) }-r\,\mathit{d\ensuremath{\theta}}\,\mathit{d\ensuremath{\phi}}\,\cos{\left( \mathit{\ensuremath{\theta}}\right) }]\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i51) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
is(d\ensuremath{\omega}=-\ensuremath{\lambda});
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}o51}\label{o51} 
\mbox{true}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Update Connection 1-form} $\Theta$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i52) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(\ensuremath{\Theta}:at(\ensuremath{\Theta},linsol))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t52}\label{t52} 
\mathit{\ensuremath{\Theta}}=\begin{pmatrix}0 & -\mathit{d\ensuremath{\theta}} & -\mathit{d\ensuremath{\phi}}\,\sin{\left( \mathit{\ensuremath{\theta}}\right) }\\
\mathit{d\ensuremath{\theta}} & 0 & -\mathit{d\ensuremath{\phi}}\,\cos{\left( \mathit{\ensuremath{\theta}}\right) }\\
\mathit{d\ensuremath{\phi}}\,\sin{\left( \mathit{\ensuremath{\theta}}\right) } & \mathit{d\ensuremath{\phi}}\,\cos{\left( \mathit{\ensuremath{\theta}}\right) } & 0\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Update Connection 2-form} $\mathrm{d}\Theta$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i53) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(d\ensuremath{\Theta}:trigsimp(matrixmap(edit,ext\_diff(\ensuremath{\Theta}))))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t53}\label{t53} 
\mathit{d\ensuremath{\Theta}}=\begin{pmatrix}0 & 0 & -\mathit{d\ensuremath{\theta}}\,\mathit{d\ensuremath{\phi}}\,\cos{\left( \mathit{\ensuremath{\theta}}\right) }\\
0 & 0 & \mathit{d\ensuremath{\theta}}\,\mathit{d\ensuremath{\phi}}\,\sin{\left( \mathit{\ensuremath{\theta}}\right) }\\
\mathit{d\ensuremath{\theta}}\,\mathit{d\ensuremath{\phi}}\,\cos{\left( \mathit{\ensuremath{\theta}}\right) } & -\mathit{d\ensuremath{\theta}}\,\mathit{d\ensuremath{\phi}}\,\sin{\left( \mathit{\ensuremath{\theta}}\right) } & 0\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Update coefficients}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i56) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(A:at(A,linsol))\$\\
ldisplay(B:at(B,linsol))\$\\
ldisplay(C:at(C,linsol))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t54}\label{t54} 
A=[0,1,0]\mbox{}\]
\[\tag{\%{}t55}\label{t55} 
B=[0,0,\sin{\left( \mathit{\ensuremath{\theta}}\right) }]\mbox{}\]
\[\tag{\%{}t56}\label{t56} 
C=[0,0,\cos{\left( \mathit{\ensuremath{\theta}}\right) }]\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Change matrix multiplication operator}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i57) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
matrix\_element\_mult:"\ensuremath{\sim }"\$
\end{minipage}

\textbf{Cartan's Second structural equation}:
$\Omega_{\color{red} j}^{\color{red} i}=
\mathrm{d}\Theta_{\color{red} j}^{\color{red} i}+
\Theta_{\color{blue} k}^{\color{red} i}\wedge
\Theta_{\color{red} j}^{\color{blue} k}$


\pagebreak
\textbf{Curvature 2-form} $\Omega$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i58) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(\ensuremath{\Omega}:matrixmap(edit,d\ensuremath{\Theta}+\ensuremath{\Theta}.\ensuremath{\Theta}))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t58}\label{t58} 
\mathit{\ensuremath{\Omega}}=\begin{pmatrix}0 & 0 & 0\\
0 & 0 & 0\\
0 & 0 & 0\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Restore matrix multiplication operator}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i59) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
matrix\_element\_mult:"*"\$
\end{minipage}

\textbf{Forms in terms of the coframe} $\sigma$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i60) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
Eqs:makelist(\ensuremath{\sigma}[\ensuremath{\xi}[i]]=\ensuremath{\omega}[\ensuremath{\xi}[i]],i,1,cartan\_dim);
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{Eqs}\label{Eqs}
[{{\mathit{\ensuremath{\sigma}}}_{r}}=\mathit{dr},{{\mathit{\ensuremath{\sigma}}}_{\mathit{\ensuremath{\theta}}}}=r\,\mathit{d\ensuremath{\theta}},{{\mathit{\ensuremath{\sigma}}}_{\mathit{\ensuremath{\phi}}}}=r\,\mathit{d\ensuremath{\phi}}\,\sin{\left( \mathit{\ensuremath{\theta}}\right) }]\mbox{}
\]
%%%%%%%%%%%%%%%


\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i61) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
linsol:linsolve(Eqs,cartan\_basis);
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{linsol}\label{linsol}
\left[\mathit{dr}={{\mathit{\ensuremath{\sigma}}}_{r}},\mathit{d\ensuremath{\theta}}=\frac{{{\mathit{\ensuremath{\sigma}}}_{\mathit{\ensuremath{\theta}}}}}{r},\mathit{d\ensuremath{\phi}}=\frac{{{\mathit{\ensuremath{\sigma}}}_{\mathit{\ensuremath{\phi}}}}}{r\,\sin{\left( \mathit{\ensuremath{\theta}}\right) }}\right]\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Connection 1-form} $\Theta$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i62) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(\ensuremath{\Theta}:ev(\ensuremath{\Theta},linsol,fullratsimp))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t62}\label{t62} 
\mathit{\ensuremath{\Theta}}=\begin{pmatrix}0 & -\frac{{{\mathit{\ensuremath{\sigma}}}_{\mathit{\ensuremath{\theta}}}}}{r} & -\frac{{{\mathit{\ensuremath{\sigma}}}_{\mathit{\ensuremath{\phi}}}}}{r}\\
\frac{{{\mathit{\ensuremath{\sigma}}}_{\mathit{\ensuremath{\theta}}}}}{r} & 0 & -\frac{\cos{\left( \mathit{\ensuremath{\theta}}\right) }\,{{\mathit{\ensuremath{\sigma}}}_{\mathit{\ensuremath{\phi}}}}}{r\,\sin{\left( \mathit{\ensuremath{\theta}}\right) }}\\
\frac{{{\mathit{\ensuremath{\sigma}}}_{\mathit{\ensuremath{\phi}}}}}{r} & \frac{\cos{\left( \mathit{\ensuremath{\theta}}\right) }\,{{\mathit{\ensuremath{\sigma}}}_{\mathit{\ensuremath{\phi}}}}}{r\,\sin{\left( \mathit{\ensuremath{\theta}}\right) }} & 0\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Curvature 2-form} $\Omega$



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i63) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
ldisplay(\ensuremath{\Omega}:ev(\ensuremath{\Omega},linsol,fullratsimp))\$
\end{minipage}
%%% OUTPUT:
\[\displaystyle
\tag{\%{}t63}\label{t63} 
\mathit{\ensuremath{\Omega}}=\begin{pmatrix}0 & 0 & 0\\
0 & 0 & 0\\
0 & 0 & 0\end{pmatrix}\mbox{}
\]
%%%%%%%%%%%%%%%

\textbf{Clean up}



\noindent
%%%%%%%%%%%%%%%
%%% INPUT:
\begin{minipage}[t]{8ex}\color{red}\bf
(\%{}i67) 
\end{minipage}
\begin{minipage}[t]{\textwidth}\color{blue}\tt
forget(0\ensuremath{\leq}r)\$\\
forget(0\ensuremath{\leq}\ensuremath{\theta},\ensuremath{\theta}\ensuremath{\leq}\ensuremath{\pi})\$\\
forget(0\ensuremath{\leq}sin(\ensuremath{\theta}))\$\\
forget(0\ensuremath{\leq}\ensuremath{\phi},\ensuremath{\phi}\ensuremath{\leq}2*\ensuremath{\pi})\$
\end{minipage}




\end{document}
